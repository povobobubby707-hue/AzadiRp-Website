<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoidCode - فروش و خدمات گیم</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8a2be2;
            --secondary: #4b0082;
            --accent: #00ff88;
            --dark: #0a0a1a;
            --darker: #050510;
            --light: #f0f0f5;
            --success: #28a745;
            --warning: #ffc107;
            --danger: #dc3545;
            --gray: #6c757d;
            --gray-dark: #343a40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Vazirmatn', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--darker);
            color: var(--light);
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
        }

        /* Binary Background */
        #binaryBackground {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 0.5rem 1.5rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo img {
            height: 35px;
        }

        .logo h1 {
            font-size: 1.3rem;
            background: linear-gradient(to right, var(--accent), #fff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
        }

        .logo span {
            color: var(--accent);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 1.2rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.4rem 0.8rem;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .user-actions {
            display: flex;
            gap: 0.8rem;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: white;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .btn {
            padding: 0.4rem 1.2rem;
            border: none;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .btn-primary {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: var(--dark);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-accent {
            background: var(--accent);
            color: var(--dark);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        /* Hero Section */
        .hero {
            margin-top: 60px;
            padding: 3rem 2rem;
            background: linear-gradient(rgba(10, 10, 26, 0.85), rgba(5, 5, 16, 0.9)), 
                        url('https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 20%, var(--darker) 70%);
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .hero h2 {
            font-size: 2.2rem;
            margin-bottom: 1rem;
            background: linear-gradient(to right, var(--accent), var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradient 3s ease infinite;
            background-size: 200% auto;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .hero p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: #e0e0ff;
        }

        /* Products Section */
        .products {
            padding: 4rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .section-title h2 {
            font-size: 2rem;
            display: inline-block;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            margin: 10px auto;
            border-radius: 2px;
        }

        .categories {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .category-btn {
            padding: 0.6rem 1.2rem;
            background: var(--dark);
            color: var(--light);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .category-btn.active {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
        }

        .category-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .product-card {
            background: linear-gradient(145deg, #151525, #101020);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(138, 43, 226, 0.3);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(138, 43, 226, 0.4);
            border-color: var(--primary);
        }

        .product-image {
            height: 160px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .product-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, transparent, var(--darker));
            display: flex;
            align-items: flex-end;
            padding: 1rem;
        }

        .product-price {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .product-content {
            padding: 1.2rem;
        }

        .product-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: white;
        }

        .product-description {
            color: #b8b8d0;
            margin-bottom: 1rem;
            font-size: 0.85rem;
        }

        .product-features {
            list-style: none;
            margin-bottom: 1.2rem;
        }

        .product-features li {
            margin-bottom: 0.4rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #b8b8d0;
            font-size: 0.85rem;
        }

        .product-features i {
            color: var(--primary);
            font-size: 0.8rem;
        }

        /* Testimonials Section */
        .testimonials {
            padding: 4rem 2rem;
            background: linear-gradient(to right, var(--dark), var(--darker));
            max-width: 1400px;
            margin: 0 auto;
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .testimonial-card {
            background: linear-gradient(145deg, #151525, #101020);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(138, 43, 226, 0.3);
            transition: all 0.3s ease;
        }

        .testimonial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(138, 43, 226, 0.4);
        }

        .testimonial-content {
            margin-bottom: 1rem;
            color: #e0e0ff;
            font-style: italic;
            line-height: 1.6;
        }

        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .testimonial-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            overflow: hidden;
        }

        .testimonial-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .testimonial-info h4 {
            color: white;
            margin-bottom: 0.2rem;
        }

        .testimonial-info p {
            color: #b8b8d0;
            font-size: 0.85rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal-content {
            background: linear-gradient(145deg, #151525, #101020);
            margin: 2rem auto;
            padding: 1.5rem;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(138, 43, 226, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 1rem;
            left: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--light);
        }

        .modal-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: white;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #b8b8d0;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-control {
            width: 100%;
            padding: 0.7rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(138, 43, 226, 0.3);
        }

        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }

        .additional-options {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.2rem;
        }

        .option-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.4rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .option-item:last-child {
            border-bottom: none;
        }

        .option-info {
            display: flex;
            flex-direction: column;
        }

        .option-name {
            font-weight: 500;
            color: white;
            font-size: 0.9rem;
        }

        .option-price {
            color: var(--primary);
            font-size: 0.8rem;
        }

        .option-select {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
        }

        .payment-methods {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 1rem;
            margin-bottom: 1.2rem;
        }

        .payment-method {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .payment-method:hover {
            border-color: var(--primary);
        }

        .payment-method.selected {
            border-color: var(--primary);
            background: rgba(138, 43, 226, 0.2);
        }

        .payment-icon {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }

        .payment-name {
            font-weight: 500;
            color: white;
            font-size: 0.85rem;
        }

        .bank-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            text-align: center;
        }

        .bank-card {
            font-family: monospace;
            font-size: 1.1rem;
            letter-spacing: 1px;
            margin: 0.5rem 0;
            color: var(--primary);
        }

        .bank-name {
            color: #b8b8d0;
            font-size: 0.9rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .success-icon {
            font-size: 3.5rem;
            color: var(--success);
            margin-bottom: 1rem;
        }

        .tracking-code {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-family: monospace;
            font-size: 1.1rem;
            text-align: center;
            color: var(--primary);
        }

        /* Footer */
        footer {
            background: linear-gradient(to right, var(--dark), var(--darker));
            padding: 3rem 2rem 1rem;
            margin-top: 5rem;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            color: white;
            position: relative;
            display: inline-block;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: -5px;
            right: 0;
            width: 50px;
            height: 3px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 0.8rem;
        }

        .footer-column a {
            color: #b8b8d0;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .footer-column a:hover {
            color: white;
            padding-right: 5px;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border-radius: 50%;
            color: white;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #b8b8d0;
            font-size: 0.85rem;
        }

        /* User Panel */
        .user-panel, .admin-panel {
            display: none;
            padding: 4rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .panel-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 1rem;
            flex-wrap: wrap;
        }

        .panel-tab {
            padding: 0.6rem 1.2rem;
            background: transparent;
            color: var(--light);
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .panel-tab.active {
            background: rgba(138, 43, 226, 0.3);
            color: white;
        }

        .panel-content {
            display: none;
        }

        .panel-content.active {
            display: block;
        }

        .orders-table, .tickets-table, .users-table, .products-table, .discounts-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .orders-table th, .orders-table td,
        .tickets-table th, .tickets-table td,
        .users-table th, .users-table td,
        .products-table th, .products-table td,
        .discounts-table th, .discounts-table td {
            padding: 0.8rem;
            text-align: right;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }

        .orders-table th, .tickets-table th, .users-table th, .products-table th, .discounts-table th {
            background: rgba(138, 43, 226, 0.3);
            color: white;
            font-weight: 600;
        }

        .status {
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-pending {
            background: rgba(255, 193, 7, 0.2);
            color: var(--warning);
        }

        .status-confirmed {
            background: rgba(40, 167, 69, 0.2);
            color: var(--success);
        }

        .status-cancelled {
            background: rgba(220, 53, 69, 0.2);
            color: var(--danger);
        }

        .status-completed {
            background: rgba(0, 255, 136, 0.2);
            color: var(--accent);
        }

        .ticket-messages {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 8px;
        }

        .message.user {
            background: rgba(138, 43, 226, 0.2);
            border-right: 3px solid var(--primary);
        }

        .message.admin {
            background: rgba(0, 255, 136, 0.1);
            border-right: 3px solid var(--accent);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.8rem;
            color: #b8b8d0;
        }

        .message-content {
            color: #e0e0ff;
        }

        /* Admin Panel */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.2rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(145deg, #151525, #101020);
            padding: 1.2rem;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(138, 43, 226, 0.3);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stat-label {
            color: #b8b8d0;
            font-size: 0.85rem;
        }

        .admin-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .order-details {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .order-details h4 {
            margin-bottom: 0.5rem;
            color: white;
        }

        .order-details p {
            color: #b8b8d0;
            margin-bottom: 0.5rem;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .header-container {
                flex-direction: column;
                gap: 0.8rem;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h2 {
                font-size: 1.9rem;
            }
        }

        @media (max-width: 768px) {
            .hero h2 {
                font-size: 1.7rem;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .panel-tabs {
                flex-wrap: wrap;
            }

            .admin-actions {
                flex-direction: column;
            }
        }

        @media (max-width: 576px) {
            .hero {
                padding: 2rem 1rem;
            }
            
            .products {
                padding: 2.5rem 1rem;
            }
            
            .hero h2 {
                font-size: 1.5rem;
            }
            
            .section-title h2 {
                font-size: 1.6rem;
            }
            
            .user-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Binary Background -->
    <canvas id="binaryBackground"></canvas>

    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-gamepad" style="color: var(--accent);"></i>
                <h1>Void<span>Code</span></h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#home">صفحه اصلی</a></li>
                    <li><a href="#products">محصولات</a></li>
                    <li><a href="#testimonials">نظرات</a></li>
                    <li><a href="#about">درباره ما</a></li>
                    <li><a href="#contact">تماس با ما</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <span id="usernameDisplay">کاربر</span>
                    <button class="btn btn-outline" id="userPanelBtn">پنل کاربری</button>
                    <button class="btn btn-accent" id="adminPanelBtn" style="display: none;">پنل ادمین</button>
                    <button class="btn btn-outline" id="logoutBtn">خروج</button>
                </div>
                <button class="btn btn-outline" id="loginBtn"><i class="fas fa-user"></i> ورود</button>
                <button class="btn btn-primary" id="registerBtn"><i class="fas fa-user-plus"></i> ثبت نام</button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h2>به VoidCode خوش آمدید</h2>
            <p>ارائه دهنده بهترین خدمات و محصولات گیمینگ در ایران</p>
            <p>از سال 1404 فعالیت خود را آغاز کرده و با ارائه خدمات با کیفیت در زمینه‌های مختلف گیمینگ در خدمت شما هستیم</p>
            <div style="margin-top: 2rem;">
                <button class="btn btn-primary" style="margin-left: 1rem;" onclick="scrollToProducts()">مشاهده محصولات</button>
                <button class="btn btn-outline">درباره ما</button>
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section class="products" id="products">
        <div class="section-title">
            <h2>محصولات و خدمات ما</h2>
        </div>
        <div class="categories">
            <button class="category-btn active" data-category="all">همه محصولات</button>
            <button class="category-btn" data-category="vps">سرور مجازی</button>
            <button class="category-btn" data-category="hosting">هاستینگ</button>
            <button class="category-btn" data-category="teamspeak">تیم اسپیک</button>
            <button class="category-btn" data-category="script">اسکریپت SAMP & MTA</button>
            <button class="category-btn" data-category="gamepass">گیم پس</button>
            <button class="category-btn" data-category="cp">CP کالاف</button>
            <button class="category-btn" data-category="oxide">OXIDE</button>
        </div>
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded dynamically -->
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials" id="testimonials">
        <div class="section-title">
            <h2>نظرات مشتریان</h2>
        </div>
        <div class="testimonials-grid">
            <div class="testimonial-card">
                <div class="testimonial-content">
                    "من از سرورهای مجازی VoidCode برای بازی کالاف استفاده می‌کنم. واقعاً پینگ پایین و پایداری عالی داره. هیچوقت قطعی نداشتم و پشتیبانی‌شون همیشه پاسخگو هستن."
                </div>
                <div class="testimonial-author">
                    <div class="testimonial-avatar">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="امیررضا">
                    </div>
                    <div class="testimonial-info">
                        <h4>امیررضا</h4>
                        <p>بازیکن کالاف از 2 سال پیش</p>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <div class="testimonial-content">
                    "گیم پس رندر VoidCode رو خریدم و واقعاً راضیم. بازی‌های سنگین مثل رد دد 2 و سایبرپانک رو بدون هیچ مشکلی اجرا می‌کنه. ارزش پولش رو داره."
                </div>
                <div class="testimonial-author">
                    <div class="testimonial-avatar">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="سارا">
                    </div>
                    <div class="testimonial-info">
                        <h4>سارا</h4>
                        <p>استریمر پابجی</p>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <div class="testimonial-content">
                    "سرور MTA رو از VoidCode گرفتم و واقعاً حرفه‌ای کار می‌کنن. اسکریپت‌ها بهینه و پلاگین‌ها کاملن. پشتیبانی 24 ساعته دارن که خیالم رو راحت کرده."
                </div>
                <div class="testimonial-author">
                    <div class="testimonial-avatar">
                        <img src="https://randomuser.me/api/portraits/men/22.jpg" alt="محمد">
                    </div>
                    <div class="testimonial-info">
                        <h4>محمد</h4>
                        <p>مدیر سرور MTA</p>
                    </div>
                </div>
            </div>
            <div class="testimonial-card">
                <div class="testimonial-content">
                    "CP کالاف رو از VoidCode خریدم و در کمتر از 10 دقیقه واصل شد. قیمتش نسبت به بقیه جاها منصفانه‌تر بود و پشتیبانی خوبی دارن. حتماً دوباره خرید می‌کنم."
                </div>
                <div class="testimonial-author">
                    <div class="testimonial-avatar">
                        <img src="https://randomuser.me/api/portraits/men/67.jpg" alt="رضا">
                    </div>
                    <div class="testimonial-info">
                        <h4>رضا</h4>
                        <p>بازیکن حرفه‌ای کالاف</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- User Panel -->
    <section class="user-panel" id="userPanel">
        <div class="section-title">
            <h2>پنل کاربری</h2>
        </div>
        <div class="panel-tabs">
            <button class="panel-tab active" data-tab="orders">سفارشات من</button>
            <button class="panel-tab" data-tab="tickets">تیکت‌های من</button>
            <button class="panel-tab" data-tab="profile">پروفایل</button>
        </div>
        <div class="panel-content active" id="ordersContent">
            <h3>سفارشات من</h3>
            <table class="orders-table">
                <thead>
                    <tr>
                        <th>شماره سفارش</th>
                        <th>محصول</th>
                        <th>تاریخ</th>
                        <th>مبلغ</th>
                        <th>وضعیت</th>
                        <th>عملیات</th>
                    </tr>
                </thead>
                <tbody id="userOrdersTable">
                    <!-- Orders will be loaded dynamically -->
                </tbody>
            </table>
        </div>
        <div class="panel-content" id="ticketsContent">
            <h3>تیکت‌های پشتیبانی</h3>
            <button class="btn btn-primary" id="createTicketBtn">ایجاد تیکت جدید</button>
            <div id="userTicketsList">
                <!-- Tickets will be loaded dynamically -->
            </div>
        </div>
        <div class="panel-content" id="profileContent">
            <h3>اطلاعات حساب کاربری</h3>
            <form id="profileForm">
                <div class="form-group">
                    <label for="profileFirstName">نام</label>
                    <input type="text" id="profileFirstName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="profileLastName">نام خانوادگی</label>
                    <input type="text" id="profileLastName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="profileEmail">ایمیل</label>
                    <input type="email" id="profileEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="profileProvince">استان</label>
                    <select id="profileProvince" class="form-control" required>
                        <option value="">انتخاب کنید</option>
                        <option value="tehran">تهران</option>
                        <option value="alborz">البرز</option>
                        <option value="isfahan">اصفهان</option>
                        <option value="fars">فارس</option>
                        <option value="khorasan">خراسان رضوی</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="profileCity">شهر</label>
                    <input type="text" id="profileCity" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary">ذخیره تغییرات</button>
            </form>
        </div>
    </section>

    <!-- Admin Panel -->
    <section class="admin-panel" id="adminPanel">
        <div class="section-title">
            <h2>پنل مدیریت</h2>
        </div>
        <div class="admin-stats">
            <div class="stat-card">
                <div class="stat-value" id="totalOrders">0</div>
                <div class="stat-label">سفارشات کل</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="pendingOrders">0</div>
                <div class="stat-label">سفارشات در انتظار</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalUsers">0</div>
                <div class="stat-label">کاربران</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalProducts">0</div>
                <div class="stat-label">محصولات</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="openTickets">0</div>
                <div class="stat-label">تیکت‌های باز</div>
            </div>
        </div>
        <div class="panel-tabs">
            <button class="panel-tab active" data-tab="adminOrders">مدیریت سفارشات</button>
            <button class="panel-tab" data-tab="adminTickets">مدیریت تیکت‌ها</button>
            <button class="panel-tab" data-tab="adminProducts">مدیریت محصولات</button>
            <button class="panel-tab" data-tab="adminDiscount">کدهای تخفیف</button>
            <button class="panel-tab" data-tab="adminUsers">مدیریت کاربران</button>
        </div>
        <div class="panel-content active" id="adminOrdersContent">
            <h3>مدیریت سفارشات</h3>
            <table class="orders-table">
                <thead>
                    <tr>
                        <th>شماره سفارش</th>
                        <th>کاربر</th>
                        <th>محصول</th>
                        <th>تاریخ</th>
                        <th>مبلغ</th>
                        <th>وضعیت</th>
                        <th>عملیات</th>
                    </tr>
                </thead>
                <tbody id="adminOrdersTable">
                    <!-- Orders will be loaded dynamically -->
                </tbody>
            </table>
        </div>
        <div class="panel-content" id="adminTicketsContent">
            <h3>مدیریت تیکت‌ها</h3>
            <div id="adminTicketsList">
                <!-- Tickets will be loaded dynamically -->
            </div>
        </div>
        <div class="panel-content" id="adminProductsContent">
            <h3>مدیریت محصولات</h3>
            <div class="admin-actions">
                <button class="btn btn-primary" id="addProductBtn">افزودن محصول جدید</button>
            </div>
            <table class="products-table">
                <thead>
                    <tr>
                        <th>نام محصول</th>
                        <th>دسته‌بندی</th>
                        <th>قیمت</th>
                        <th>عملیات</th>
                    </tr>
                </thead>
                <tbody id="adminProductsTable">
                    <!-- Products will be loaded dynamically -->
                </tbody>
            </table>
        </div>
        <div class="panel-content" id="adminDiscountContent">
            <h3>مدیریت کدهای تخفیف</h3>
            <div class="admin-actions">
                <button class="btn btn-primary" id="addDiscountBtn">افزودن کد تخفیف</button>
            </div>
            <table class="discounts-table">
                <thead>
                    <tr>
                        <th>کد</th>
                        <th>درصد تخفیف</th>
                        <th>تاریخ انقضا</th>
                        <th>وضعیت</th>
                        <th>عملیات</th>
                    </tr>
                </thead>
                <tbody id="adminDiscountsTable">
                    <!-- Discount codes will be loaded dynamically -->
                </tbody>
            </table>
        </div>
        <div class="panel-content" id="adminUsersContent">
            <h3>مدیریت کاربران</h3>
            <table class="users-table">
                <thead>
                    <tr>
                        <th>نام کاربری</th>
                        <th>ایمیل</th>
                        <th>تاریخ ثبت‌نام</th>
                        <th>تعداد سفارشات</th>
                        <th>عملیات</th>
                    </tr>
                </thead>
                <tbody id="adminUsersTable">
                    <!-- Users will be loaded dynamically -->
                </tbody>
            </table>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>درباره VoidCode</h3>
                <p>ما از سال 1404 فعالیت خود را در زمینه فروش و خدمات گیم آغاز کرده‌ایم و با ارائه محصولات با کیفیت و پشتیبانی حرفه‌ای در خدمت جامعه گیمینگ ایران هستیم.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-telegram"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3>لینک‌های سریع</h3>
                <ul>
                    <li><a href="#home">صفحه اصلی</a></li>
                    <li><a href="#products">محصولات</a></li>
                    <li><a href="#testimonials">نظرات</a></li>
                    <li><a href="#about">درباره ما</a></li>
                    <li><a href="#contact">تماس با ما</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>خدمات ما</h3>
                <ul>
                    <li><a href="#">سرور مجازی ایران</a></li>
                    <li><a href="#">سرور مجازی کرکی کانادا</a></li>
                    <li><a href="#">هاست ایران</a></li>
                    <li><a href="#">سرور آماده SAMP</a></li>
                    <li><a href="#">سرور آماده MTA</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>تماس با ما</h3>
                <ul>
                    <li><i class="fas fa-map-marker-alt"></i> ایران، تهران</li>
                    <li><i class="fas fa-phone"></i> 021-12345678</li>
                    <li><i class="fas fa-envelope"></i> info@voidcode.ir</li>
                    <li><i class="fas fa-clock"></i> پشتیبانی 24/7</li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>کلیه حقوق این وبسایت متعلق به VoidCode می‌باشد. © 1404</p>
        </div>
    </footer>

    <!-- Modals -->
    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('loginModal')">&times;</span>
            <h2 class="modal-title">ورود به حساب کاربری</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginUsername">نام کاربری</label>
                    <input type="text" id="loginUsername" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">رمز عبور</label>
                    <input type="password" id="loginPassword" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">ورود</button>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('registerModal')">&times;</span>
            <h2 class="modal-title">ثبت نام در VoidCode</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerEmail">ایمیل</label>
                    <input type="email" id="registerEmail" class="form-control" required>
                    <small id="emailError" style="color: var(--danger); display: none;">ایمیل معتبر نیست یا قبلاً استفاده شده است</small>
                </div>
                <div class="form-group">
                    <label for="registerUsername">نام کاربری</label>
                    <input type="text" id="registerUsername" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerFirstName">نام</label>
                    <input type="text" id="registerFirstName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerLastName">نام خانوادگی</label>
                    <input type="text" id="registerLastName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerNationalCode">کد ملی</label>
                    <input type="text" id="registerNationalCode" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerProvince">استان</label>
                    <select id="registerProvince" class="form-control" required>
                        <option value="">انتخاب کنید</option>
                        <option value="tehran">تهران</option>
                        <option value="alborz">البرز</option>
                        <option value="isfahan">اصفهان</option>
                        <option value="fars">فارس</option>
                        <option value="khorasan">خراسان رضوی</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="registerCity">شهر</label>
                    <input type="text" id="registerCity" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">رمز عبور</label>
                    <input type="password" id="registerPassword" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="registerConfirmPassword">تکرار رمز عبور</label>
                    <input type="password" id="registerConfirmPassword" class="form-control" required>
                    <small id="passwordError" style="color: var(--danger); display: none;">رمز عبور و تکرار آن مطابقت ندارند</small>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="registerTerms" required>
                        قوانین و مقررات VoidCode را خوانده‌ام و می‌پذیرم
                    </label>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">ثبت نام</button>
            </form>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('productModal')">&times;</span>
            <h2 class="modal-title" id="productModalTitle">محصول</h2>
            <div id="productModalContent">
                <!-- Product details will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('checkoutModal')">&times;</span>
            <h2 class="modal-title">تکمیل خرید</h2>
            <div id="checkoutContent">
                <!-- Checkout steps will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Admin Order Details Modal -->
    <div class="modal" id="adminOrderModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('adminOrderModal')">&times;</span>
            <h2 class="modal-title">مدیریت سفارش</h2>
            <div id="adminOrderContent">
                <!-- Order details will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Admin Ticket Details Modal -->
    <div class="modal" id="adminTicketModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('adminTicketModal')">&times;</span>
            <h2 class="modal-title">مدیریت تیکت</h2>
            <div id="adminTicketContent">
                <!-- Ticket details will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Add Product Modal -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('addProductModal')">&times;</span>
            <h2 class="modal-title">افزودن محصول جدید</h2>
            <form id="addProductForm">
                <div class="form-group">
                    <label for="productName">نام محصول</label>
                    <input type="text" id="productName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="productCategory">دسته‌بندی</label>
                    <select id="productCategory" class="form-control" required>
                        <option value="vps">سرور مجازی</option>
                        <option value="hosting">هاستینگ</option>
                        <option value="teamspeak">تیم اسپیک</option>
                        <option value="script">اسکریپت SAMP & MTA</option>
                        <option value="gamepass">گیم پس</option>
                        <option value="cp">CP کالاف</option>
                        <option value="oxide">OXIDE</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="productPrice">قیمت (تومان)</label>
                    <input type="number" id="productPrice" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="productDescription">توضیحات</label>
                    <textarea id="productDescription" class="form-control" required></textarea>
                </div>
                <div class="form-group">
                    <label for="productImage">آدرس تصویر</label>
                    <input type="text" id="productImage" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>گزینه‌های اضافی</label>
                    <div id="productOptions">
                        <div class="option-item">
                            <input type="text" placeholder="نام گزینه" class="form-control option-name">
                            <input type="number" placeholder="قیمت اضافی" class="form-control option-price">
                            <button type="button" class="btn btn-danger" onclick="removeOption(this)">حذف</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-outline" onclick="addOption()">افزودن گزینه</button>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">افزودن محصول</button>
            </form>
        </div>
    </div>

    <!-- Add Discount Modal -->
    <div class="modal" id="addDiscountModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('addDiscountModal')">&times;</span>
            <h2 class="modal-title">افزودن کد تخفیف</h2>
            <form id="addDiscountForm">
                <div class="form-group">
                    <label for="discountCode">کد تخفیف</label>
                    <input type="text" id="discountCode" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="discountPercentage">درصد تخفیف</label>
                    <input type="number" id="discountPercentage" class="form-control" min="1" max="100" required>
                </div>
                <div class="form-group">
                    <label for="discountExpiration">تاریخ انقضا</label>
                    <input type="date" id="discountExpiration" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">افزودن کد تخفیف</button>
            </form>
        </div>
    </div>

    <!-- Create Ticket Modal -->
    <div class="modal" id="createTicketModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('createTicketModal')">&times;</span>
            <h2 class="modal-title">ایجاد تیکت جدید</h2>
            <form id="createTicketForm">
                <div class="form-group">
                    <label for="ticketSubject">موضوع</label>
                    <input type="text" id="ticketSubject" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="ticketOrder">مرتبط با سفارش (اختیاری)</label>
                    <select id="ticketOrder" class="form-control">
                        <option value="">انتخاب کنید</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="ticketMessage">پیام</label>
                    <textarea id="ticketMessage" class="form-control" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">ارسال تیکت</button>
            </form>
        </div>
    </div>

    <script>
        // Binary Background Animation
        const binaryBackground = document.getElementById('binaryBackground');
        const ctx = binaryBackground.getContext('2d');
        
        // Set canvas size
        binaryBackground.width = window.innerWidth;
        binaryBackground.height = window.innerHeight;
        
        // Characters to use for the binary rain
        const binaryChars = '01';
        const fontSize = 14;
        const columns = binaryBackground.width / fontSize;
        
        // Array to track the y position of each column
        const drops = [];
        for (let i = 0; i < columns; i++) {
            drops[i] = 1;
        }
        
        // Draw the binary rain
        function drawBinaryRain() {
            // Semi-transparent black to create fade effect
            ctx.fillStyle = 'rgba(5, 5, 16, 0.05)';
            ctx.fillRect(0, 0, binaryBackground.width, binaryBackground.height);
            
            ctx.fillStyle = '#00ff88'; // Green text
            ctx.font = `${fontSize}px monospace`;
            
            for (let i = 0; i < drops.length; i++) {
                // Random binary character
                const text = binaryChars.charAt(Math.floor(Math.random() * binaryChars.length));
                
                // x coordinate of the drop, y coordinate
                const x = i * fontSize;
                const y = drops[i] * fontSize;
                
                // Render the character
                ctx.fillText(text, x, y);
                
                // Reset drop to top once it reaches the bottom with some randomness
                if (y > binaryBackground.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                
                // Move drop down
                drops[i]++;
            }
        }
        
        // Animation loop
        setInterval(drawBinaryRain, 50);
        
        // Update canvas size on window resize
        window.addEventListener('resize', function() {
            binaryBackground.width = window.innerWidth;
            binaryBackground.height = window.innerHeight;
        });

        // Database simulation using localStorage with auto-save
        const initializeDatabase = () => {
            // Initialize users if not exists
            if (!localStorage.getItem('voidcode_users')) {
                const adminUser = {
                    id: 1,
                    username: 'Mamad',
                    password: 'polese1234',
                    email: 'admin@voidcode.ir',
                    firstName: 'مدیر',
                    lastName: 'سیستم',
                    nationalCode: '0000000000',
                    country: 'IR',
                    province: 'tehran',
                    city: 'تهران',
                    isAdmin: true,
                    registrationDate: new Date().toISOString()
                };
                localStorage.setItem('voidcode_users', JSON.stringify([adminUser]));
            }

            // Initialize products if not exists
            if (!localStorage.getItem('voidcode_products')) {
                const products = [
                    {
                        id: 1,
                        name: 'سرور مجازی ایران',
                        category: 'vps',
                        price: 100000,
                        description: 'سرور مجازی با پینگ پایین و پایداری بالا برای بازی‌های آنلاین',
                        image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'رم اضافه', price: 50000 },
                            { name: 'هارد اضافه', price: 30000 },
                            { name: 'پورت اختصاصی', price: 20000 },
                            { name: 'انتی دیداس اختصاصی', price: 40000 }
                        ]
                    },
                    {
                        id: 2,
                        name: 'سرور مجازی کرکی کانادا',
                        category: 'vps',
                        price: 120000,
                        description: 'سرور مجازی با دسترسی کامل و پایداری بالا برای بازی‌های آنلاین',
                        image: 'https://images.unsplash.com/photo-1552820728-8b83bb6b773f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'رم اضافه', price: 60000 },
                            { name: 'هارد اضافه', price: 35000 },
                            { name: 'پورت اختصاصی', price: 25000 },
                            { name: 'انتی دیداس اختصاصی', price: 45000 }
                        ]
                    },
                    {
                        id: 3,
                        name: 'هاست ایران',
                        category: 'hosting',
                        price: 90000,
                        description: 'هاستینگ با سرعت و پایداری بالا برای وبسایت‌های گیمینگ',
                        image: 'https://images.unsplash.com/photo-1627398242454-45a1465c2479?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2074&q=80',
                        options: [
                            { name: 'SSL رایگان', price: 0 },
                            { name: 'دامنه رایگان', price: 0 },
                            { name: 'پشتیبانی 24/7', price: 20000 }
                        ]
                    },
                    {
                        id: 4,
                        name: 'سرور آماده SAMP',
                        category: 'script',
                        price: 50000,
                        description: 'سرور آماده و بهینه شده برای بازی SAMP با اسکریپت‌های پیشرفته',
                        image: 'https://images.unsplash.com/photo-1552820728-8b83bb6b773f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'نصب و راه‌اندازی سریع', price: 0 },
                            { name: 'پشتیبانی از پلاگین‌های مختلف', price: 0 },
                            { name: 'امکان شخصی‌سازی کامل', price: 15000 }
                        ]
                    },
                    {
                        id: 5,
                        name: 'سرور آماده MTA',
                        category: 'script',
                        price: 300000,
                        description: 'سرور آماده و بهینه شده برای بازی MTA با اسکریپت‌های پیشرفته',
                        image: 'https://images.unsplash.com/photo-1552820728-8b83bb6b773f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'نصب و راه‌اندازی سریع', price: 0 },
                            { name: 'پشتیبانی از پلاگین‌های مختلف', price: 0 },
                            { name: 'امکان شخصی‌سازی کامل', price: 50000 }
                        ]
                    },
                    {
                        id: 6,
                        name: 'سرور 64 اسلات تیم اسپیک',
                        category: 'teamspeak',
                        price: 21000,
                        description: 'سرور اختصاصی با 64 اسلات برای تیم‌های حرفه‌ای',
                        image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'پینگ پایین و پایداری بالا', price: 0 },
                            { name: 'پشتیبانی 24/7', price: 10000 },
                            { name: 'امکان مدیریت کامل سرور', price: 0 }
                        ]
                    },
                    {
                        id: 7,
                        name: 'گیم پس التیمیت قانونی',
                        category: 'gamepass',
                        price: 540000,
                        description: 'دسترسی کامل و قانونی به تمامی بازی‌ها و محتوای اضافی',
                        image: 'https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: '1 ماهه', price: 0 },
                            { name: '2 ماهه', price: 100000 },
                            { name: '5 ماهه', price: 200000 },
                            { name: '7 ماهه', price: 300000 },
                            { name: 'گیم پس رندر', price: 150000 }
                        ]
                    },
                    {
                        id: 8,
                        name: 'CP کالاف 1000',
                        category: 'cp',
                        price: 120000,
                        description: '1000 CP برای بازی کالاف دیوتی با تحویل فوری',
                        image: 'https://uploadkon.ir/uploads/aefb26_25Picsart-25-11-26-22-29-08-253.jpg',
                        options: [
                            { name: 'تحویل فوری', price: 0 },
                            { name: 'پشتیبانی 24 ساعته', price: 0 }
                        ]
                    },
                    {
                        id: 9,
                        name: 'CP کالاف 2400',
                        category: 'cp',
                        price: 250000,
                        description: '2400 CP برای بازی کالاف دیوتی با تحویل فوری',
                        image: 'https://uploadkon.ir/uploads/aefb26_25Picsart-25-11-26-22-29-08-253.jpg',
                        options: [
                            { name: 'تحویل فوری', price: 0 },
                            { name: 'پشتیبانی 24 ساعته', price: 0 }
                        ]
                    },
                    {
                        id: 10,
                        name: 'CP کالاف 5000',
                        category: 'cp',
                        price: 480000,
                        description: '5000 CP برای بازی کالاف دیوتی با تحویل فوری',
                        image: 'https://uploadkon.ir/uploads/aefb26_25Picsart-25-11-26-22-29-08-253.jpg',
                        options: [
                            { name: 'تحویل فوری', price: 0 },
                            { name: 'پشتیبانی 24 ساعته', price: 0 }
                        ]
                    },
                    {
                        id: 11,
                        name: 'سکه OXIDE 1000',
                        category: 'oxide',
                        price: 50000,
                        description: '1000 سکه برای بازی OXIDE با تحویل فوری',
                        image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'تحویل فوری', price: 0 },
                            { name: 'پشتیبانی 24 ساعته', price: 0 }
                        ]
                    },
                    {
                        id: 12,
                        name: 'سکه OXIDE 5000',
                        category: 'oxide',
                        price: 200000,
                        description: '5000 سکه برای بازی OXIDE با تحویل فوری',
                        image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'تحویل فوری', price: 0 },
                            { name: 'پشتیبانی 24 ساعته', price: 0 }
                        ]
                    },
                    {
                        id: 13,
                        name: 'سکه OXIDE 10000',
                        category: 'oxide',
                        price: 350000,
                        description: '10000 سکه برای بازی OXIDE با تحویل فوری',
                        image: 'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80',
                        options: [
                            { name: 'تحویل فوری', price: 0 },
                            { name: 'پشتیبانی 24 ساعته', price: 0 }
                        ]
                    }
                ];
                localStorage.setItem('voidcode_products', JSON.stringify(products));
            }

            // Initialize orders if not exists
            if (!localStorage.getItem('voidcode_orders')) {
                localStorage.setItem('voidcode_orders', JSON.stringify([]));
            }

            // Initialize discount codes if not exists
            if (!localStorage.getItem('voidcode_discounts')) {
                const discounts = [
                    { id: 1, code: 'WELCOME10', discount: 10, expiration: '2024-12-31', used: false },
                    { id: 2, code: 'GAMER20', discount: 20, expiration: '2024-10-31', used: false }
                ];
                localStorage.setItem('voidcode_discounts', JSON.stringify(discounts));
            }

            // Initialize tickets if not exists
            if (!localStorage.getItem('voidcode_tickets')) {
                localStorage.setItem('voidcode_tickets', JSON.stringify([]));
            }
        };

        // Auto-save function
        const autoSave = () => {
            // This function would save data to a server in a real application
            // For now, we're using localStorage which is already persistent
            console.log('Auto-saving data...');
        };

        // Set up auto-save every 1 second
        setInterval(autoSave, 1000);

        // Application state
        let currentUser = null;
        let currentProduct = null;
        let selectedOptions = [];
        let selectedPaymentMethod = null;
        let currentOrder = null;
        let currentTicket = null;

        // DOM elements
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const userInfo = document.getElementById('userInfo');
        const userPanelBtn = document.getElementById('userPanelBtn');
        const adminPanelBtn = document.getElementById('adminPanelBtn');
        const userPanel = document.getElementById('userPanel');
        const adminPanel = document.getElementById('adminPanel');
        const productsGrid = document.getElementById('productsGrid');
        const userOrdersTable = document.getElementById('userOrdersTable');
        const adminOrdersTable = document.getElementById('adminOrdersTable');
        const totalOrders = document.getElementById('totalOrders');
        const pendingOrders = document.getElementById('pendingOrders');
        const totalUsers = document.getElementById('totalUsers');
        const totalProducts = document.getElementById('totalProducts');
        const openTickets = document.getElementById('openTickets');
        const createTicketBtn = document.getElementById('createTicketBtn');
        const userTicketsList = document.getElementById('userTicketsList');
        const adminTicketsList = document.getElementById('adminTicketsList');
        const adminProductsTable = document.getElementById('adminProductsTable');
        const adminDiscountsTable = document.getElementById('adminDiscountsTable');
        const adminUsersTable = document.getElementById('adminUsersTable');
        const addProductBtn = document.getElementById('addProductBtn');
        const addDiscountBtn = document.getElementById('addDiscountBtn');

        // Initialize the application
        const initApp = () => {
            initializeDatabase();
            loadProducts();
            checkUserStatus();
            setupEventListeners();
        };

        // Load products to the page
        const loadProducts = (category = 'all') => {
            const products = JSON.parse(localStorage.getItem('voidcode_products'));
            productsGrid.innerHTML = '';

            const filteredProducts = category === 'all' 
                ? products 
                : products.filter(product => product.category === category);

            if (filteredProducts.length === 0) {
                productsGrid.innerHTML = '<p style="text-align: center; grid-column: 1 / -1; color: #b8b8d0; padding: 2rem;">هیچ محصولی در این دسته‌بندی یافت نشد.</p>';
                return;
            }

            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image" style="background-image: url('${product.image}');">
                        <div class="product-overlay">
                            <div class="product-price">${product.price.toLocaleString()} تومان</div>
                        </div>
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <ul class="product-features">
                            ${product.options.slice(0, 3).map(option => 
                                `<li><i class="fas fa-check"></i> ${option.name}</li>`
                            ).join('')}
                        </ul>
                        <button class="btn btn-primary" style="width: 100%;" onclick="viewProduct(${product.id})">مشاهده و خرید</button>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        };

        // View product details
        const viewProduct = (productId) => {
            if (!currentUser) {
                alert('برای مشاهده محصولات و خرید، لطفاً وارد حساب کاربری خود شوید.');
                openModal('loginModal');
                return;
            }

            const products = JSON.parse(localStorage.getItem('voidcode_products'));
            currentProduct = products.find(p => p.id === productId);
            
            if (!currentProduct) {
                alert('محصول یافت نشد!');
                return;
            }
            
            document.getElementById('productModalTitle').textContent = currentProduct.name;
            
            let optionsHTML = '';
            if (currentProduct.options && currentProduct.options.length > 0) {
                optionsHTML = `
                    <div class="additional-options">
                        <h3>گزینه‌های اضافی</h3>
                        ${currentProduct.options.map(option => `
                            <div class="option-item">
                                <div class="option-info">
                                    <div class="option-name">${option.name}</div>
                                    <div class="option-price">${option.price > 0 ? option.price.toLocaleString() + ' تومان' : 'رایگان'}</div>
                                </div>
                                <div class="option-select">
                                    <input type="checkbox" class="checkbox" id="option-${option.name}" data-name="${option.name}" data-price="${option.price}" onchange="toggleOption(this)">
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            document.getElementById('productModalContent').innerHTML = `
                <div class="product-details">
                    <p>${currentProduct.description}</p>
                    <div class="product-price" style="margin: 1rem 0; text-align: center; font-size: 1.2rem;">
                        قیمت پایه: ${currentProduct.price.toLocaleString()} تومان
                    </div>
                    ${optionsHTML}
                    <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="proceedToCheckout()">ادامه فرآیند خرید</button>
                </div>
            `;
            
            openModal('productModal');
            selectedOptions = [];
        };

        // Toggle additional option
        const toggleOption = (checkbox) => {
            const name = checkbox.getAttribute('data-name');
            const price = parseInt(checkbox.getAttribute('data-price'));
            
            if (checkbox.checked) {
                selectedOptions.push({ name, price });
            } else {
                selectedOptions = selectedOptions.filter(option => option.name !== name);
            }
        };

        // Proceed to checkout
        const proceedToCheckout = () => {
            closeModal('productModal');
            
            const totalPrice = currentProduct.price + selectedOptions.reduce((sum, option) => sum + option.price, 0);
            
            document.getElementById('checkoutContent').innerHTML = `
                <div class="checkout-step active" id="checkoutStep1">
                    <h3>مرحله 1: اطلاعات پرداخت</h3>
                    
                    <div class="bank-info">
                        <h4>لطفاً مبلغ ${totalPrice.toLocaleString()} تومان را به حساب زیر واریز کنید:</h4>
                        <div class="bank-card">6221 0612 4568 0667</div>
                        <div class="bank-name">به نام: مجتبی اسماعیل زاده سالتانی</div>
                    </div>
                    
                    <div class="form-group">
                        <label>انتخاب کارت برای پرداخت</label>
                        <div class="payment-methods">
                            <div class="payment-method" onclick="selectPaymentMethod('parsian')">
                                <div class="payment-icon"><i class="fas fa-university"></i></div>
                                <div class="payment-name">پارسیان</div>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('saman')">
                                <div class="payment-icon"><i class="fas fa-university"></i></div>
                                <div class="payment-name">بانک سامان</div>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('mellat')">
                                <div class="payment-icon"><i class="fas fa-university"></i></div>
                                <div class="payment-name">بانک ملت</div>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('pasargad')">
                                <div class="payment-icon"><i class="fas fa-university"></i></div>
                                <div class="payment-name">بانک پاسارگاد</div>
                            </div>
                            <div class="payment-method" onclick="selectPaymentMethod('melli')">
                                <div class="payment-icon"><i class="fas fa-university"></i></div>
                                <div class="payment-name">بانک مهر ایران</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="discountCode">کد تخفیف (اختیاری)</label>
                        <input type="text" id="discountCode" class="form-control" placeholder="کد تخفیف خود را وارد کنید">
                        <button class="btn btn-outline" style="margin-top: 0.5rem; width: 100%;" onclick="applyDiscount()">اعمال کد تخفیف</button>
                    </div>
                    
                    <div class="form-group">
                        <label>لینک آپلود رسید پرداخت</label>
                        <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; text-align: center; margin-bottom: 0.5rem;">
                            <p>لطفاً پس از پرداخت، تصویر رسید خود را در سایت زیر آپلود کرده و لینک آن را در فیلد زیر وارد کنید:</p>
                            <a href="https://uploadkon.ir" target="_blank" style="color: var(--primary);">https://uploadkon.ir</a>
                        </div>
                        <input type="text" id="receiptLink" class="form-control" placeholder="لینک رسید پرداخت">
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="acceptTerms" required>
                            با تایید خرید، تمامی قوانین و مقررات VoidCode را پذیرفته‌ام
                        </label>
                    </div>
                    
                    <div class="order-summary">
                        <h4>خلاصه سفارش</h4>
                        <div class="option-item">
                            <div class="option-name">${currentProduct.name}</div>
                            <div class="option-price">${currentProduct.price.toLocaleString()} تومان</div>
                        </div>
                        ${selectedOptions.map(option => `
                            <div class="option-item">
                                <div class="option-name">${option.name}</div>
                                <div class="option-price">${option.price > 0 ? option.price.toLocaleString() + ' تومان' : 'رایگان'}</div>
                            </div>
                        `).join('')}
                        <div class="option-item" style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 1rem; font-weight: bold;">
                            <div class="option-name">جمع کل</div>
                            <div class="option-price">${totalPrice.toLocaleString()} تومان</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="submitOrder()">تایید و پرداخت</button>
                </div>
                
                <div class="loading" id="checkoutLoading">
                    <div class="loading-spinner"></div>
                    <p>در حال پردازش پرداخت...</p>
                </div>
                
                <div class="success-message" id="checkoutSuccess">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>پرداخت با موفقیت انجام شد</h3>
                    <p>سفارش شما با موفقیت ثبت شد و به زودی تکمیل خواهد شد.</p>
                    <div class="tracking-code" id="trackingCode"></div>
                    <button class="btn btn-primary" onclick="closeModal('checkoutModal')">بستن</button>
                </div>
            `;
            
            openModal('checkoutModal');
            selectedPaymentMethod = null;
        };

        // Select payment method
        const selectPaymentMethod = (method) => {
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            selectedPaymentMethod = method;
        };

        // Apply discount code
        const applyDiscount = () => {
            const code = document.getElementById('discountCode').value;
            const discounts = JSON.parse(localStorage.getItem('voidcode_discounts'));
            const discount = discounts.find(d => d.code === code && !d.used && new Date(d.expiration) > new Date());
            
            if (discount) {
                alert(`کد تخفیف ${discount.discount}% اعمال شد!`);
                // Here you would calculate the discounted price
            } else {
                alert('کد تخفیف معتبر نیست یا منقضی شده است.');
            }
        };

        // Submit order
        const submitOrder = () => {
            if (!selectedPaymentMethod) {
                alert('لطفاً روش پرداخت را انتخاب کنید.');
                return;
            }
            
            if (!document.getElementById('receiptLink').value) {
                alert('لطفاً لینک رسید پرداخت را وارد کنید.');
                return;
            }
            
            if (!document.getElementById('acceptTerms').checked) {
                alert('لطفاً قوانین و مقررات را بپذیرید.');
                return;
            }
            
            document.getElementById('checkoutStep1').style.display = 'none';
            document.getElementById('checkoutLoading').style.display = 'block';
            
            // Simulate payment processing
            setTimeout(() => {
                document.getElementById('checkoutLoading').style.display = 'none';
                
                // Generate tracking code
                const trackingCode = 'VC' + Date.now().toString().slice(-6);
                document.getElementById('trackingCode').textContent = `کد پیگیری: ${trackingCode}`;
                
                // Save order to database
                const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
                const totalPrice = currentProduct.price + selectedOptions.reduce((sum, option) => sum + option.price, 0);
                
                const newOrder = {
                    id: orders.length + 1,
                    userId: currentUser.id,
                    productId: currentProduct.id,
                    productName: currentProduct.name,
                    options: selectedOptions,
                    totalPrice: totalPrice,
                    status: 'pending',
                    trackingCode: trackingCode,
                    receiptLink: document.getElementById('receiptLink').value,
                    paymentMethod: selectedPaymentMethod,
                    orderDate: new Date().toISOString(),
                    adminNotes: ''
                };
                
                orders.push(newOrder);
                localStorage.setItem('voidcode_orders', JSON.stringify(orders));
                
                document.getElementById('checkoutSuccess').style.display = 'block';
                
                // Update admin panel if admin is viewing
                if (currentUser.isAdmin) {
                    loadAdminOrders();
                    updateAdminStats();
                }
            }, 3000);
        };

        // User authentication
        const login = (username, password) => {
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('voidcode_currentUser', JSON.stringify(user));
                checkUserStatus();
                closeModal('loginModal');
                return true;
            }
            return false;
        };

        const register = (userData) => {
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            
            // Check if email already exists
            if (users.find(u => u.email === userData.email)) {
                return { success: false, message: 'ایمیل قبلاً استفاده شده است' };
            }
            
            // Check if username already exists
            if (users.find(u => u.username === userData.username)) {
                return { success: false, message: 'نام کاربری قبلاً استفاده شده است' };
            }
            
            // Create new user
            const newUser = {
                id: users.length + 1,
                ...userData,
                isAdmin: false,
                registrationDate: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('voidcode_users', JSON.stringify(users));
            
            return { success: true, message: 'ثبت نام با موفقیت انجام شد' };
        };

        const logout = () => {
            currentUser = null;
            localStorage.removeItem('voidcode_currentUser');
            checkUserStatus();
        };

        // Check user status and update UI
        const checkUserStatus = () => {
            const savedUser = localStorage.getItem('voidcode_currentUser');
            
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                loginBtn.style.display = 'none';
                registerBtn.style.display = 'none';
                userInfo.style.display = 'flex';
                document.getElementById('usernameDisplay').textContent = currentUser.username;
                document.getElementById('userAvatar').textContent = currentUser.username.charAt(0).toUpperCase();
                
                if (currentUser.isAdmin) {
                    adminPanelBtn.style.display = 'block';
                    loadAdminOrders();
                    loadAdminTickets();
                    loadAdminProducts();
                    loadAdminDiscounts();
                    loadAdminUsers();
                    updateAdminStats();
                } else {
                    adminPanelBtn.style.display = 'none';
                }
                
                loadUserOrders();
                loadUserTickets();
                loadUserProfile();
            } else {
                loginBtn.style.display = 'block';
                registerBtn.style.display = 'block';
                userInfo.style.display = 'none';
                userPanel.style.display = 'none';
                adminPanel.style.display = 'none';
            }
        };

        // Load user orders
        const loadUserOrders = () => {
            if (!currentUser) return;
            
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            const userOrders = orders.filter(order => order.userId === currentUser.id);
            
            userOrdersTable.innerHTML = '';
            
            if (userOrders.length === 0) {
                userOrdersTable.innerHTML = '<tr><td colspan="6" style="text-align: center;">هیچ سفارشی یافت نشد</td></tr>';
                return;
            }
            
            userOrders.forEach(order => {
                const row = document.createElement('tr');
                let statusClass = '';
                let statusText = '';
                
                switch (order.status) {
                    case 'pending':
                        statusClass = 'status-pending';
                        statusText = 'در انتظار تایید';
                        break;
                    case 'confirmed':
                        statusClass = 'status-confirmed';
                        statusText = 'تایید شده';
                        break;
                    case 'cancelled':
                        statusClass = 'status-cancelled';
                        statusText = 'لغو شده';
                        break;
                    case 'completed':
                        statusClass = 'status-completed';
                        statusText = 'تکمیل شده';
                        break;
                }
                
                row.innerHTML = `
                    <td>${order.trackingCode}</td>
                    <td>${order.productName}</td>
                    <td>${new Date(order.orderDate).toLocaleDateString('fa-IR')}</td>
                    <td>${order.totalPrice.toLocaleString()} تومان</td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="btn btn-outline" onclick="viewOrderDetails(${order.id})">مشاهده</button>
                    </td>
                `;
                userOrdersTable.appendChild(row);
            });
        };

        // Load user tickets
        const loadUserTickets = () => {
            if (!currentUser) return;
            
            const tickets = JSON.parse(localStorage.getItem('voidcode_tickets'));
            const userTickets = tickets.filter(ticket => ticket.userId === currentUser.id);
            
            userTicketsList.innerHTML = '';
            
            if (userTickets.length === 0) {
                userTicketsList.innerHTML = '<p>هیچ تیکتی یافت نشد.</p>';
                return;
            }
            
            userTickets.forEach(ticket => {
                const ticketCard = document.createElement('div');
                ticketCard.className = 'testimonial-card';
                let statusClass = '';
                let statusText = '';
                
                switch (ticket.status) {
                    case 'open':
                        statusClass = 'status-pending';
                        statusText = 'باز';
                        break;
                    case 'answered':
                        statusClass = 'status-confirmed';
                        statusText = 'پاسخ داده شده';
                        break;
                    case 'closed':
                        statusClass = 'status-cancelled';
                        statusText = 'بسته شده';
                        break;
                }
                
                ticketCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h4>${ticket.subject}</h4>
                        <span class="status ${statusClass}">${statusText}</span>
                    </div>
                    <p>${ticket.messages[0].content.substring(0, 100)}...</p>
                    <div style="display: flex; justify-content: space-between; margin-top: 1rem;">
                        <small>تاریخ ایجاد: ${new Date(ticket.createdAt).toLocaleDateString('fa-IR')}</small>
                        <button class="btn btn-outline" onclick="viewTicket(${ticket.id})">مشاهده</button>
                    </div>
                `;
                userTicketsList.appendChild(ticketCard);
            });
        };

        // Load user profile
        const loadUserProfile = () => {
            if (!currentUser) return;
            
            document.getElementById('profileFirstName').value = currentUser.firstName;
            document.getElementById('profileLastName').value = currentUser.lastName;
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profileProvince').value = currentUser.province;
            document.getElementById('profileCity').value = currentUser.city;
        };

        // Load admin orders
        const loadAdminOrders = () => {
            if (!currentUser || !currentUser.isAdmin) return;
            
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            
            adminOrdersTable.innerHTML = '';
            
            if (orders.length === 0) {
                adminOrdersTable.innerHTML = '<tr><td colspan="7" style="text-align: center;">هیچ سفارشی یافت نشد</td></tr>';
                return;
            }
            
            orders.forEach(order => {
                const user = users.find(u => u.id === order.userId);
                let statusClass = '';
                let statusText = '';
                
                switch (order.status) {
                    case 'pending':
                        statusClass = 'status-pending';
                        statusText = 'در انتظار تایید';
                        break;
                    case 'confirmed':
                        statusClass = 'status-confirmed';
                        statusText = 'تایید شده';
                        break;
                    case 'cancelled':
                        statusClass = 'status-cancelled';
                        statusText = 'لغو شده';
                        break;
                    case 'completed':
                        statusClass = 'status-completed';
                        statusText = 'تکمیل شده';
                        break;
                }
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.trackingCode}</td>
                    <td>${user ? user.username : 'نامشخص'}</td>
                    <td>${order.productName}</td>
                    <td>${new Date(order.orderDate).toLocaleDateString('fa-IR')}</td>
                    <td>${order.totalPrice.toLocaleString()} تومان</td>
                    <td><span class="status ${statusClass}">${statusText}</span></td>
                    <td>
                        <button class="btn btn-success" onclick="updateOrderStatus(${order.id}, 'confirmed')">تایید</button>
                        <button class="btn btn-warning" onclick="updateOrderStatus(${order.id}, 'pending')">در انتظار</button>
                        <button class="btn btn-danger" onclick="updateOrderStatus(${order.id}, 'cancelled')">لغو</button>
                        <button class="btn btn-accent" onclick="completeOrder(${order.id})">تکمیل</button>
                        <button class="btn btn-outline" onclick="viewAdminOrderDetails(${order.id})">جزئیات</button>
                    </td>
                `;
                adminOrdersTable.appendChild(row);
            });
        };

        // Load admin tickets
        const loadAdminTickets = () => {
            if (!currentUser || !currentUser.isAdmin) return;
            
            const tickets = JSON.parse(localStorage.getItem('voidcode_tickets'));
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            
            adminTicketsList.innerHTML = '';
            
            if (tickets.length === 0) {
                adminTicketsList.innerHTML = '<p>هیچ تیکتی یافت نشد.</p>';
                return;
            }
            
            tickets.forEach(ticket => {
                const user = users.find(u => u.id === ticket.userId);
                const ticketCard = document.createElement('div');
                ticketCard.className = 'testimonial-card';
                let statusClass = '';
                let statusText = '';
                
                switch (ticket.status) {
                    case 'open':
                        statusClass = 'status-pending';
                        statusText = 'باز';
                        break;
                    case 'answered':
                        statusClass = 'status-confirmed';
                        statusText = 'پاسخ داده شده';
                        break;
                    case 'closed':
                        statusClass = 'status-cancelled';
                        statusText = 'بسته شده';
                        break;
                }
                
                ticketCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <div>
                            <h4>${ticket.subject}</h4>
                            <small>از: ${user ? user.username : 'نامشخص'}</small>
                        </div>
                        <span class="status ${statusClass}">${statusText}</span>
                    </div>
                    <p>${ticket.messages[0].content.substring(0, 100)}...</p>
                    <div style="display: flex; justify-content: space-between; margin-top: 1rem;">
                        <small>تاریخ ایجاد: ${new Date(ticket.createdAt).toLocaleDateString('fa-IR')}</small>
                        <button class="btn btn-outline" onclick="viewAdminTicketDetails(${ticket.id})">مشاهده و پاسخ</button>
                    </div>
                `;
                adminTicketsList.appendChild(ticketCard);
            });
        };

        // Load admin products
        const loadAdminProducts = () => {
            if (!currentUser || !currentUser.isAdmin) return;
            
            const products = JSON.parse(localStorage.getItem('voidcode_products'));
            
            adminProductsTable.innerHTML = '';
            
            if (products.length === 0) {
                adminProductsTable.innerHTML = '<tr><td colspan="4" style="text-align: center;">هیچ محصولی یافت نشد</td></tr>';
                return;
            }
            
            products.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>${getCategoryName(product.category)}</td>
                    <td>${product.price.toLocaleString()} تومان</td>
                    <td>
                        <button class="btn btn-outline" onclick="editProduct(${product.id})">ویرایش</button>
                        <button class="btn btn-danger" onclick="deleteProduct(${product.id})">حذف</button>
                    </td>
                `;
                adminProductsTable.appendChild(row);
            });
        };

        // Load admin discounts
        const loadAdminDiscounts = () => {
            if (!currentUser || !currentUser.isAdmin) return;
            
            const discounts = JSON.parse(localStorage.getItem('voidcode_discounts'));
            
            adminDiscountsTable.innerHTML = '';
            
            if (discounts.length === 0) {
                adminDiscountsTable.innerHTML = '<tr><td colspan="5" style="text-align: center;">هیچ کد تخفیفی یافت نشد</td></tr>';
                return;
            }
            
            discounts.forEach(discount => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${discount.code}</td>
                    <td>${discount.discount}%</td>
                    <td>${new Date(discount.expiration).toLocaleDateString('fa-IR')}</td>
                    <td><span class="status ${discount.used ? 'status-cancelled' : 'status-confirmed'}">${discount.used ? 'استفاده شده' : 'فعال'}</span></td>
                    <td>
                        <button class="btn btn-danger" onclick="deleteDiscount(${discount.id})">حذف</button>
                    </td>
                `;
                adminDiscountsTable.appendChild(row);
            });
        };

        // Load admin users
        const loadAdminUsers = () => {
            if (!currentUser || !currentUser.isAdmin) return;
            
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            
            adminUsersTable.innerHTML = '';
            
            if (users.length === 0) {
                adminUsersTable.innerHTML = '<tr><td colspan="5" style="text-align: center;">هیچ کاربری یافت نشد</td></tr>';
                return;
            }
            
            users.forEach(user => {
                const userOrders = orders.filter(order => order.userId === user.id);
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.username} ${user.isAdmin ? '(مدیر)' : ''}</td>
                    <td>${user.email}</td>
                    <td>${new Date(user.registrationDate).toLocaleDateString('fa-IR')}</td>
                    <td>${userOrders.length}</td>
                    <td>
                        <button class="btn btn-outline" onclick="viewUserDetails(${user.id})">مشاهده</button>
                        ${!user.isAdmin ? `<button class="btn btn-danger" onclick="deleteUser(${user.id})">حذف</button>` : ''}
                    </td>
                `;
                adminUsersTable.appendChild(row);
            });
        };

        // Get category name
        const getCategoryName = (category) => {
            const categories = {
                'vps': 'سرور مجازی',
                'hosting': 'هاستینگ',
                'teamspeak': 'تیم اسپیک',
                'script': 'اسکریپت SAMP & MTA',
                'gamepass': 'گیم پس',
                'cp': 'CP کالاف',
                'oxide': 'OXIDE'
            };
            return categories[category] || category;
        };

        // Update order status
        const updateOrderStatus = (orderId, status) => {
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            const orderIndex = orders.findIndex(order => order.id === orderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].status = status;
                localStorage.setItem('voidcode_orders', JSON.stringify(orders));
                loadAdminOrders();
                updateAdminStats();
                
                // If the current user is viewing their orders, update them too
                if (currentUser && !currentUser.isAdmin) {
                    loadUserOrders();
                }
                
                alert(`وضعیت سفارش به "${getStatusText(status)}" تغییر یافت.`);
            }
        };

        // Complete order and send product info
        const completeOrder = (orderId) => {
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            const orderIndex = orders.findIndex(order => order.id === orderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].status = 'completed';
                
                // In a real application, you would send the product information to the user
                // For now, we'll just add a note
                orders[orderIndex].adminNotes = 'اطلاعات محصول برای کاربر ارسال شد.';
                
                localStorage.setItem('voidcode_orders', JSON.stringify(orders));
                loadAdminOrders();
                updateAdminStats();
                
                alert('سفارش تکمیل شد و اطلاعات محصول برای کاربر ارسال گردید.');
            }
        };

        // View admin order details
        const viewAdminOrderDetails = (orderId) => {
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            currentOrder = orders.find(order => order.id === orderId);
            
            if (!currentOrder) return;
            
            const user = users.find(u => u.id === currentOrder.userId);
            
            document.getElementById('adminOrderContent').innerHTML = `
                <div class="order-details">
                    <h4>جزئیات سفارش</h4>
                    <p><strong>شماره پیگیری:</strong> ${currentOrder.trackingCode}</p>
                    <p><strong>کاربر:</strong> ${user ? user.username : 'نامشخص'}</p>
                    <p><strong>محصول:</strong> ${currentOrder.productName}</p>
                    <p><strong>مبلغ:</strong> ${currentOrder.totalPrice.toLocaleString()} تومان</p>
                    <p><strong>تاریخ سفارش:</strong> ${new Date(currentOrder.orderDate).toLocaleDateString('fa-IR')}</p>
                    <p><strong>وضعیت:</strong> ${getStatusText(currentOrder.status)}</p>
                    <p><strong>لینک رسید:</strong> <a href="${currentOrder.receiptLink}" target="_blank">${currentOrder.receiptLink}</a></p>
                </div>
                
                <div class="form-group">
                    <label for="adminOrderNotes">یادداشت برای کاربر</label>
                    <textarea id="adminOrderNotes" class="form-control" placeholder="اطلاعات محصول یا پیام برای کاربر">${currentOrder.adminNotes || ''}</textarea>
                </div>
                
                <div class="admin-actions">
                    <button class="btn btn-success" onclick="updateOrderStatus(${currentOrder.id}, 'confirmed')">تایید سفارش</button>
                    <button class="btn btn-warning" onclick="updateOrderStatus(${currentOrder.id}, 'pending')">در انتظار</button>
                    <button class="btn btn-danger" onclick="updateOrderStatus(${currentOrder.id}, 'cancelled')">لغو سفارش</button>
                    <button class="btn btn-accent" onclick="completeOrder(${currentOrder.id})">تکمیل و ارسال اطلاعات</button>
                    <button class="btn btn-primary" onclick="saveAdminNotes(${currentOrder.id})">ذخیره یادداشت</button>
                </div>
            `;
            
            openModal('adminOrderModal');
        };

        // Save admin notes
        const saveAdminNotes = (orderId) => {
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            const orderIndex = orders.findIndex(order => order.id === orderId);
            
            if (orderIndex !== -1) {
                orders[orderIndex].adminNotes = document.getElementById('adminOrderNotes').value;
                localStorage.setItem('voidcode_orders', JSON.stringify(orders));
                alert('یادداشت با موفقیت ذخیره شد.');
            }
        };

        // View admin ticket details
        const viewAdminTicketDetails = (ticketId) => {
            const tickets = JSON.parse(localStorage.getItem('voidcode_tickets'));
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            currentTicket = tickets.find(ticket => ticket.id === ticketId);
            
            if (!currentTicket) return;
            
            const user = users.find(u => u.id === currentTicket.userId);
            
            let messagesHTML = '';
            currentTicket.messages.forEach(message => {
                messagesHTML += `
                    <div class="message ${message.sender === 'admin' ? 'admin' : 'user'}">
                        <div class="message-header">
                            <span>${message.sender === 'admin' ? 'پشتیبانی VoidCode' : user.username}</span>
                            <span>${new Date(message.timestamp).toLocaleString('fa-IR')}</span>
                        </div>
                        <div class="message-content">${message.content}</div>
                    </div>
                `;
            });
            
            document.getElementById('adminTicketContent').innerHTML = `
                <div class="order-details">
                    <h4>تیکت: ${currentTicket.subject}</h4>
                    <p><strong>کاربر:</strong> ${user ? user.username : 'نامشخص'}</p>
                    <p><strong>تاریخ ایجاد:</strong> ${new Date(currentTicket.createdAt).toLocaleDateString('fa-IR')}</p>
                    <p><strong>وضعیت:</strong> ${getTicketStatusText(currentTicket.status)}</p>
                </div>
                
                <div class="ticket-messages">
                    ${messagesHTML}
                </div>
                
                <div class="form-group">
                    <label for="adminTicketResponse">پاسخ به تیکت</label>
                    <textarea id="adminTicketResponse" class="form-control" placeholder="پاسخ خود را وارد کنید..."></textarea>
                </div>
                
                <div class="admin-actions">
                    <button class="btn btn-primary" onclick="sendTicketResponse(${currentTicket.id})">ارسال پاسخ</button>
                    <button class="btn btn-success" onclick="updateTicketStatus(${currentTicket.id}, 'answered')">پاسخ داده شده</button>
                    <button class="btn btn-warning" onclick="updateTicketStatus(${currentTicket.id}, 'open')">باز</button>
                    <button class="btn btn-danger" onclick="updateTicketStatus(${currentTicket.id}, 'closed')">بستن تیکت</button>
                </div>
            `;
            
            openModal('adminTicketModal');
        };

        // Send ticket response
        const sendTicketResponse = (ticketId) => {
            const response = document.getElementById('adminTicketResponse').value;
            if (!response.trim()) {
                alert('لطفاً پاسخ خود را وارد کنید.');
                return;
            }
            
            const tickets = JSON.parse(localStorage.getItem('voidcode_tickets'));
            const ticketIndex = tickets.findIndex(ticket => ticket.id === ticketId);
            
            if (ticketIndex !== -1) {
                tickets[ticketIndex].messages.push({
                    sender: 'admin',
                    content: response,
                    timestamp: new Date().toISOString()
                });
                
                tickets[ticketIndex].status = 'answered';
                localStorage.setItem('voidcode_tickets', JSON.stringify(tickets));
                
                alert('پاسخ با موفقیت ارسال شد.');
                closeModal('adminTicketModal');
                loadAdminTickets();
            }
        };

        // Update ticket status
        const updateTicketStatus = (ticketId, status) => {
            const tickets = JSON.parse(localStorage.getItem('voidcode_tickets'));
            const ticketIndex = tickets.findIndex(ticket => ticket.id === ticketId);
            
            if (ticketIndex !== -1) {
                tickets[ticketIndex].status = status;
                localStorage.setItem('voidcode_tickets', JSON.stringify(tickets));
                
                alert(`وضعیت تیکت به "${getTicketStatusText(status)}" تغییر یافت.`);
                closeModal('adminTicketModal');
                loadAdminTickets();
                updateAdminStats();
            }
        };

        // Add product option
        const addOption = () => {
            const optionsContainer = document.getElementById('productOptions');
            const optionDiv = document.createElement('div');
            optionDiv.className = 'option-item';
            optionDiv.innerHTML = `
                <input type="text" placeholder="نام گزینه" class="form-control option-name">
                <input type="number" placeholder="قیمت اضافی" class="form-control option-price">
                <button type="button" class="btn btn-danger" onclick="removeOption(this)">حذف</button>
            `;
            optionsContainer.appendChild(optionDiv);
        };

        // Remove product option
        const removeOption = (button) => {
            button.parentElement.remove();
        };

        // Add new product
        const addNewProduct = (productData) => {
            const products = JSON.parse(localStorage.getItem('voidcode_products'));
            const newProduct = {
                id: products.length + 1,
                ...productData
            };
            
            products.push(newProduct);
            localStorage.setItem('voidcode_products', JSON.stringify(products));
            
            return { success: true, message: 'محصول با موفقیت افزوده شد' };
        };

        // Add new discount code
        const addNewDiscount = (discountData) => {
            const discounts = JSON.parse(localStorage.getItem('voidcode_discounts'));
            const newDiscount = {
                id: discounts.length + 1,
                ...discountData,
                used: false
            };
            
            discounts.push(newDiscount);
            localStorage.setItem('voidcode_discounts', JSON.stringify(discounts));
            
            return { success: true, message: 'کد تخفیف با موفقیت افزوده شد' };
        };

        // Create new ticket
        const createNewTicket = (ticketData) => {
            const tickets = JSON.parse(localStorage.getItem('voidcode_tickets'));
            const newTicket = {
                id: tickets.length + 1,
                userId: currentUser.id,
                ...ticketData,
                status: 'open',
                createdAt: new Date().toISOString(),
                messages: [
                    {
                        sender: 'user',
                        content: ticketData.message,
                        timestamp: new Date().toISOString()
                    }
                ]
            };
            
            tickets.push(newTicket);
            localStorage.setItem('voidcode_tickets', JSON.stringify(tickets));
            
            return { success: true, message: 'تیکت با موفقیت ایجاد شد' };
        };

        // Get status text
        const getStatusText = (status) => {
            const statuses = {
                'pending': 'در انتظار تایید',
                'confirmed': 'تایید شده',
                'cancelled': 'لغو شده',
                'completed': 'تکمیل شده'
            };
            return statuses[status] || status;
        };

        // Get ticket status text
        const getTicketStatusText = (status) => {
            const statuses = {
                'open': 'باز',
                'answered': 'پاسخ داده شده',
                'closed': 'بسته شده'
            };
            return statuses[status] || status;
        };

        // Update admin statistics
        const updateAdminStats = () => {
            if (!currentUser || !currentUser.isAdmin) return;
            
            const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
            const users = JSON.parse(localStorage.getItem('voidcode_users'));
            const products = JSON.parse(localStorage.getItem('voidcode_products'));
            const tickets = JSON.parse(localStorage.getItem('voidcode_tickets'));
            
            totalOrders.textContent = orders.length;
            pendingOrders.textContent = orders.filter(order => order.status === 'pending').length;
            totalUsers.textContent = users.length;
            totalProducts.textContent = products.length;
            openTickets.textContent = tickets.filter(ticket => ticket.status === 'open').length;
        };

        // Modal functions
        const openModal = (modalId) => {
            document.getElementById(modalId).style.display = 'block';
        };

        const closeModal = (modalId) => {
            document.getElementById(modalId).style.display = 'none';
        };

        // Scroll to products
        const scrollToProducts = () => {
            document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
        };

        // Setup event listeners
        const setupEventListeners = () => {
            // Login button
            loginBtn.addEventListener('click', () => {
                openModal('loginModal');
            });

            // Register button
            registerBtn.addEventListener('click', () => {
                openModal('registerModal');
            });

            // Logout button
            logoutBtn.addEventListener('click', logout);

            // User panel button
            userPanelBtn.addEventListener('click', () => {
                userPanel.style.display = 'block';
                adminPanel.style.display = 'none';
                document.getElementById('products').style.display = 'none';
                document.getElementById('home').style.display = 'none';
                document.getElementById('testimonials').style.display = 'none';
                loadUserOrders();
                loadUserTickets();
                loadUserProfile();
            });

            // Admin panel button
            adminPanelBtn.addEventListener('click', () => {
                adminPanel.style.display = 'block';
                userPanel.style.display = 'none';
                document.getElementById('products').style.display = 'none';
                document.getElementById('home').style.display = 'none';
                document.getElementById('testimonials').style.display = 'none';
                loadAdminOrders();
                loadAdminTickets();
                loadAdminProducts();
                loadAdminDiscounts();
                loadAdminUsers();
                updateAdminStats();
            });

            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    loadProducts(btn.getAttribute('data-category'));
                });
            });

            // Panel tabs
            document.querySelectorAll('.panel-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    document.querySelectorAll('.panel-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.panel-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(tabId + 'Content').classList.add('active');
                });
            });

            // Login form
            document.getElementById('loginForm').addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;
                
                if (!login(username, password)) {
                    alert('نام کاربری یا رمز عبور اشتباه است');
                }
            });

            // Register form
            document.getElementById('registerForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const email = document.getElementById('registerEmail').value;
                const username = document.getElementById('registerUsername').value;
                const firstName = document.getElementById('registerFirstName').value;
                const lastName = document.getElementById('registerLastName').value;
                const nationalCode = document.getElementById('registerNationalCode').value;
                const province = document.getElementById('registerProvince').value;
                const city = document.getElementById('registerCity').value;
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('registerConfirmPassword').value;
                
                // Validate email
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    document.getElementById('emailError').style.display = 'block';
                    return;
                } else {
                    document.getElementById('emailError').style.display = 'none';
                }
                
                // Validate password match
                if (password !== confirmPassword) {
                    document.getElementById('passwordError').style.display = 'block';
                    return;
                } else {
                    document.getElementById('passwordError').style.display = 'none';
                }
                
                const userData = {
                    email,
                    username,
                    firstName,
                    lastName,
                    nationalCode,
                    country: 'IR',
                    province,
                    city,
                    password
                };
                
                const result = register(userData);
                
                if (result.success) {
                    alert(result.message);
                    closeModal('registerModal');
                    login(username, password);
                } else {
                    alert(result.message);
                }
            });

            // Profile form
            document.getElementById('profileForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const users = JSON.parse(localStorage.getItem('voidcode_users'));
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                
                if (userIndex !== -1) {
                    users[userIndex].firstName = document.getElementById('profileFirstName').value;
                    users[userIndex].lastName = document.getElementById('profileLastName').value;
                    users[userIndex].email = document.getElementById('profileEmail').value;
                    users[userIndex].province = document.getElementById('profileProvince').value;
                    users[userIndex].city = document.getElementById('profileCity').value;
                    
                    localStorage.setItem('voidcode_users', JSON.stringify(users));
                    currentUser = users[userIndex];
                    localStorage.setItem('voidcode_currentUser', JSON.stringify(currentUser));
                    
                    alert('اطلاعات پروفایل با موفقیت به روز شد.');
                }
            });

            // Create ticket button
            createTicketBtn.addEventListener('click', () => {
                // Load user orders for ticket creation
                const orders = JSON.parse(localStorage.getItem('voidcode_orders'));
                const userOrders = orders.filter(order => order.userId === currentUser.id);
                
                const orderSelect = document.getElementById('ticketOrder');
                orderSelect.innerHTML = '<option value="">انتخاب کنید</option>';
                
                userOrders.forEach(order => {
                    const option = document.createElement('option');
                    option.value = order.id;
                    option.textContent = `${order.productName} - ${order.trackingCode}`;
                    orderSelect.appendChild(option);
                });
                
                openModal('createTicketModal');
            });

            // Create ticket form
            document.getElementById('createTicketForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const subject = document.getElementById('ticketSubject').value;
                const orderId = document.getElementById('ticketOrder').value;
                const message = document.getElementById('ticketMessage').value;
                
                const ticketData = {
                    subject,
                    orderId: orderId || null,
                    message
                };
                
                const result = createNewTicket(ticketData);
                
                if (result.success) {
                    alert(result.message);
                    closeModal('createTicketModal');
                    loadUserTickets();
                }
            });

            // Add product button
            addProductBtn.addEventListener('click', () => {
                openModal('addProductModal');
            });

            // Add product form
            document.getElementById('addProductForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const name = document.getElementById('productName').value;
                const category = document.getElementById('productCategory').value;
                const price = parseInt(document.getElementById('productPrice').value);
                const description = document.getElementById('productDescription').value;
                const image = document.getElementById('productImage').value;
                
                // Get options
                const options = [];
                document.querySelectorAll('#productOptions .option-item').forEach(item => {
                    const name = item.querySelector('.option-name').value;
                    const price = parseInt(item.querySelector('.option-price').value) || 0;
                    
                    if (name) {
                        options.push({ name, price });
                    }
                });
                
                const productData = {
                    name,
                    category,
                    price,
                    description,
                    image,
                    options
                };
                
                const result = addNewProduct(productData);
                
                if (result.success) {
                    alert(result.message);
                    closeModal('addProductModal');
                    loadAdminProducts();
                    loadProducts();
                    updateAdminStats();
                }
            });

            // Add discount button
            addDiscountBtn.addEventListener('click', () => {
                openModal('addDiscountModal');
            });

            // Add discount form
            document.getElementById('addDiscountForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const code = document.getElementById('discountCode').value;
                const discount = parseInt(document.getElementById('discountPercentage').value);
                const expiration = document.getElementById('discountExpiration').value;
                
                const discountData = {
                    code,
                    discount,
                    expiration
                };
                
                const result = addNewDiscount(discountData);
                
                if (result.success) {
                    alert(result.message);
                    closeModal('addDiscountModal');
                    loadAdminDiscounts();
                }
            });

            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });

            // Navigation links
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    
                    // Show main sections and hide panels
                    document.getElementById('products').style.display = 'block';
                    document.getElementById('home').style.display = 'block';
                    document.getElementById('testimonials').style.display = 'block';
                    userPanel.style.display = 'none';
                    adminPanel.style.display = 'none';
                    
                    // Scroll to target
                    if (targetId === 'home') {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    } else {
                        document.getElementById(targetId).scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        };

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>